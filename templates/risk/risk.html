<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/css/risk.css">
    <script type=text/javascript src="/static/javaScript/app.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/javaScript/chartjsorg.js"></script>

    <title>RISK MANAGEMENT</title>
</head>

<body>

    <!-- RISK MANAGEMENT START  -->
    <div id="risk-management" class="risk-management">
        <div class="top">
            <div class="top-left">
                <a href="{{ url_for('index') }}">
                    <button class="learn-more">
                        <span class="circle" aria-hidden="true">
                            <span class="icon arrow"></span>
                        </span>
                    </button>
                </a>
            </div>
            <div class="top-right">
                <h2 class="risk-title">リスク管理・RISK MANAGEMENT</h2>
                <span class="form-text">リスク管理：</span>
            </div>
        </div>
        <div id="risk-management-flex" class="risk-management-flex">
            <div class="risk-management-left risk-management-left-top-margin">
                <!-- start insert value -->
                <div class="container  mt-3 ">
                    <div id="resertValue" class="form-text resertValue" onclick="riskResetValue()">Reset
                        Value
                        値をリセットする
                    </div>
                    <form action="{{url_for('riskmanagement')}}" method="post">
                        <div class=" mb-3">
                            <label for="initialCash" class="form-label  ">Initial
                                cash:<span class="form-text">初期金</span>

                            </label>
                            <input class="form-control" id="initialCash" name="initialCash"
                                aria-describedby="initialCash" value="{{initialCash}}">
                            <div id="initialCash" class="form-text">Recommendation range 100-10000 $.</div>
                        </div>
                        <div class="mb-3">
                            <label for="tradesRequired" class="form-label">Trades required:</label>
                            <select class="form-select" id="tradesRequired" name="tradesRequired">
                                <option>{{tradesRequired}}</option>
                                <option>100</option>
                                <option>200</option>
                                <option>300</option>
                                <option>400</option>
                                <option>500</option>
                                <option>1000</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="riskPerTrade" class=" form-label">Risk per Trade: </label>
                            <input class="form-control" id="riskPerTrade" name="riskPerTrade"
                                aria-describedby="riskPerTrade" value="{{riskPerTrade}}">
                            <div id="riskPerTrade" class="form-text">Recommendation range 1-5%. 1/100 = 1% Risk
                                per
                                Trade
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="profitRatio" class=" form-label">Profit Loss Ratio: </label>
                            <input class="form-control" id="profitRatio" name="profitRatio"
                                aria-describedby="profitRatio" value="{{profitRatio}}">
                            <div id="winRatio" class="form-text">2 = 2:1 Profit Ratio</div>
                        </div>
                        <div class="mb-3">
                            <label for="winRatio" class=" form-label">Win Ratio(%): </label>
                            <input class="form-control" id="winRatio" name="winRatio" aria-describedby="winRatio"
                                value="{{winRatio}}">
                            <div id="winRatio" class="form-text">Recommendation range 40 - 60%. Percentage. Win
                                Ratio, 50 = 50% win rate</div>
                        </div>
                        <div class="mb-3">
                            <label for="dataRequired" class=" form-label">Data required:</label>
                            <select class="form-select" id="dataRequired" name="dataRequired">
                                <option>{{dataRequired}}</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                            </select>
                        </div>

                        <button type="submit" class="my-btn btn btn-success mt-3" onclick="multi()">Submit</button>
                        <br>
                        <br>
                    </form>
                </div>
                <!-- end insert value -->
            </div>
            <!-- top result and right start -->
            <div id="risk-management-right" class="risk-management-right">
                <div class="risk-management-right-top">
                    <div class="risk-management-right-0">
                        <div class="risk-management-result-title">INITIAL CASH</div>
                        <div class="risk-management-result-menu bi bi-currency-exchange">&nbsp;{{initialCash}}</div>
                    </div>
                    <div class="risk-management-right-0">
                        <div class="risk-management-result-title">TRADES</div>
                        <div class="icon-flex">
                            <!-- <div><img src="/static/img/image/risk/trades.png"></div> -->
                            <div class="risk-management-result-menu">{{tradesRequired}}</div>
                        </div>
                    </div>
                    <div class="risk-management-right-0">
                        <div class="risk-management-result-title">RISK PER TRADE</div>
                        <div class="icon-flex">
                            <div class="risk-management-result-menu">{{riskPerTrade}}&nbsp;</div>
                            <div><img src="/static/img/image/risk/percent1.png" alt="" class="icon-size"></div>
                        </div>
                    </div>
                    <div class="risk-management-right-0">
                        <div class="risk-management-result-title">PROFIT RATIO 比</div>
                        <div class="icon-flex">
                            <div class="risk-management-result-menu">{{profitRatio}}&nbsp;</div>

                        </div>
                    </div>
                    <div class="risk-management-right-0">
                        <div class="risk-management-result-title">WIN RATIO</div>
                        <div class="icon-flex">
                            <div class="risk-management-result-menu">{{winRatio}}&nbsp;</div>
                            <div><img src="/static/img/image/risk/percent1.png" alt="" class="icon-size"></div>
                        </div>
                    </div>
                </div>
                <!-- chart start -->
                <div class="risk-management-result-chart">
                    <!-- {{chart}}  -->
                    <iframe width="100%" height="435" src="http://127.0.0.1:5550/chart" title="Chart"></iframe>
                </div>

                <!-- chart end -->
                <div class="space"></div>
                <!-- bottom result start -->
                <div id="bottomResult" class="bottomResult">
                    <div class="risk-management-right-top">
                        <div class="risk-management-right-0">
                            <div class="risk-management-result-title-bottom">FINAL CASH</div>
                            <div class="risk-management-result-menu-bottom bi bi-currency-exchange">&nbsp;{{'%.2f'
                                %final_result[0]}}</div>
                        </div>
                        <div class="risk-management-right-0">
                            <div class="risk-management-result-title-bottom">ALL TIME HIGH</div>
                            <div class="risk-management-result-menu-bottom bi bi-currency-exchange">&nbsp;{{'%.2f'
                                %final_result[12]}}</div>
                        </div>
                        <div class="risk-management-right-0">
                            <div class="risk-management-result-title-bottom">ALL TIME LOW</div>
                            <div class="risk-management-result-menu-bottom bi bi-currency-exchange">&nbsp;{{'%.2f'
                                %final_result[13]}}</div>
                        </div>
                        <div class="risk-management-right-0">
                            <div class="risk-management-result-title-bottom">PNL NET</div>
                            <div class="icon-flex">
                                <div class="risk-management-result-menu-bottom">{{'%.2f'
                                    %final_result[3]}}&nbsp;</div>
                                <div><img src="/static/img/image/risk/percent1.png" alt="" class="icon-size"></div>
                            </div>
                        </div>
                        <div class="risk-management-right-0">
                            <div class="risk-management-result-title-bottom">MAX DRAWDOWN(%)</div>
                            <div class="risk-management-result-menu-bottom">{{'%.2f'
                                %final_result[9]}}<img src="/static/img/image/risk/percent1.png" alt=""
                                    class="icon-size"></div>

                        </div>
                    </div>
                    <div class="risk-management-right-top">
                        <div class="risk-management-right-00">
                            <div class="result-bottom-left">
                                <div class="sub-left">
                                    <div class="result-bottom risk-management-result-title-bottom">WIN</div>
                                    <div class="risk-management-result-menu-bottom1">{{'%.2f'
                                        %final_result[5]}}</div>
                                </div>
                                <div class="sub-left">
                                    <div class="result-bottom risk-management-result-title-bottom">Win streak</div>
                                    <div class="risk-management-result-menu-bottom1">{{'%.2f'
                                        %final_result[7]}}</div>
                                </div>
                            </div>
                            <div class="result-bottom-left">

                                <div class="sub-left">
                                    <div class="result-bottom risk-management-result-title-bottom">LOSS</div>
                                    <div class="risk-management-result-menu-bottom1">{{'%.2f'
                                        %final_result[6]}}</div>
                                </div>
                                <div class="sub-left">
                                    <div class="result-bottom risk-management-result-title-bottom">Loss streak</div>
                                    <div class="risk-management-result-menu-bottom1">{{'%.2f'
                                        %final_result[8]}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="risk-management-right-00">
                            <div class="result-bottom-left">
                                <div class="sub-left">
                                    <div class="result-bottom risk-management-result-title-bottom">Gross profit</div>
                                    <div class="risk-management-result-menu-bottom1">{{'%.2f'
                                        %final_result[1]}}</div>
                                </div>
                                <div class="sub-left">
                                    <div class="result-bottom risk-management-result-title-bottom">Max drawdown peak
                                    </div>
                                    <div class="risk-management-result-menu-bottom1">{{'%.2f'
                                        %final_result[10]}}</div>
                                </div>
                            </div>
                            <div class="result-bottom-left">

                                <div class="sub-left">
                                    <div class="result-bottom risk-management-result-title-bottom">Gross loss</div>
                                    <div class="risk-management-result-menu-bottom1">{{'%.2f'
                                        %final_result[2]}}</div>
                                </div>
                                <div class="sub-left">
                                    <div class="result-bottom risk-management-result-title-bottom">Max drawdown low
                                    </div>
                                    <div class="risk-management-result-menu-bottom1">{{'%.2f'
                                        %final_result[11]}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="risk-management-right-0">
                            <div class="aaa"></div>
                            <div class="risk-management-result-title-bottom">Strike rate</div>
                            <div class="risk-management-result-menu-bottom1">{{'%.2f'
                                %final_result[4]}}</div>

                            <div class="risk-management-result-title-bottom">Max atlowpos</div>
                            <div class="risk-management-result-menu-bottom1">{{'%.2f'
                                %final_result[14]}}&nbsp;<img src="/static/img/image/risk/percent1.png" alt=""
                                    class="icon-size"></div>
                        </div>
                    </div>
                </div>
                <!-- bottom result end -->
                <!-- bottom multi start -->
                <div id="multi" class="multi" style="margin-left: 60px;">
                    {% for i in range(0, dataRequired) %}
                    Final cash {{i+1}} : {{'%.2f'%finalCashMulti[i]}} ・ Pnl Net: {{'%.2f'%fnLNetMulti[i]}} ・ Strike
                    Rate: {{'%.2f'%StrikeRateMulti[i]}} ・ MAX DD: {{'%.2f'%finalMaxDDMulti[i]}}<br> {% endfor %}


                </div>
                <!-- bottom multi end -->
            </div>
            <!-- top result and right end -->
        </div>
        <!--  RISK MANAGEMENT END  -->
        <!-- {{chartData}} -->

        <br>

    </div>
</body>


</html>